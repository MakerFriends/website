---
import Layout from "../layouts/Layout.astro";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
---

<Layout
  title="Add MakerSpace"
  description="Help grow our community by adding your local MakerSpace to our directory. Share your workshop with makers worldwide!">
  <Navigation />

  <main class="flex-1">
    <!-- Hero Section -->
    <section class="py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-purple-600 to-pink-600 text-white">
      <div class="max-w-7xl mx-auto text-center">
        <h1 class="text-5xl md:text-6xl font-bold mb-6">Add Your MakerSpace üè≠</h1>
        <p class="text-xl md:text-2xl max-w-3xl mx-auto mb-8">
          Help makers worldwide discover your workshop! Add your MakerSpace to our growing directory.
        </p>
      </div>
    </section>

    <!-- Form Section -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 bg-gray-50">
      <div class="max-w-4xl mx-auto">
        <div class="bg-white rounded-2xl shadow-2xl p-8">
          <div class="mb-8">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">MakerSpace Information</h2>
            <p class="text-gray-600">
              Please provide detailed information about your MakerSpace. All fields marked with * are required.
            </p>
          </div>

          <form id="makerspaceForm" class="space-y-8">
            <!-- Basic Information -->
            <div class="border-b border-gray-200 pb-8">
              <h3 class="text-xl font-semibold text-gray-900 mb-6">Basic Information</h3>

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label for="name" class="block text-sm font-medium text-gray-700 mb-2"> MakerSpace Name * </label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="e.g., TechShop San Francisco"
                  />
                </div>

                <div>
                  <label for="website" class="block text-sm font-medium text-gray-700 mb-2"> Website URL </label>
                  <input
                    type="url"
                    id="website"
                    name="website"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="https://your-makerspace.com"
                  />
                </div>
              </div>

              <div class="mt-6">
                <label for="description" class="block text-sm font-medium text-gray-700 mb-2"> Description * </label>
                <textarea
                  id="description"
                  name="description"
                  required
                  rows="4"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="Describe your MakerSpace, its mission, and what makes it special..."></textarea>
              </div>
            </div>

            <!-- Location Information -->
            <div class="border-b border-gray-200 pb-8">
              <h3 class="text-xl font-semibold text-gray-900 mb-6">Location Information</h3>

              <div class="grid md:grid-cols-2 gap-6">
                <div class="md:col-span-2">
                  <label for="address" class="block text-sm font-medium text-gray-700 mb-2"> Full Address * </label>
                  <input
                    type="text"
                    id="address"
                    name="address"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="123 Main St, City, State 12345"
                  />
                </div>

                <div>
                  <label for="city" class="block text-sm font-medium text-gray-700 mb-2"> City * </label>
                  <input
                    type="text"
                    id="city"
                    name="city"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="San Francisco"
                  />
                </div>

                <div>
                  <label for="state" class="block text-sm font-medium text-gray-700 mb-2"> State/Province * </label>
                  <input
                    type="text"
                    id="state"
                    name="state"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="CA"
                  />
                </div>

                <div>
                  <label for="country" class="block text-sm font-medium text-gray-700 mb-2"> Country * </label>
                  <select
                    id="country"
                    name="country"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    <option value="">Select Country</option>
                    <option value="USA">United States</option>
                    <option value="Canada">Canada</option>
                    <option value="UK">United Kingdom</option>
                    <option value="Australia">Australia</option>
                    <option value="Germany">Germany</option>
                    <option value="France">France</option>
                    <option value="Netherlands">Netherlands</option>
                    <option value="Japan">Japan</option>
                    <option value="Other">Other</option>
                  </select>
                </div>

                <div>
                  <label for="zipCode" class="block text-sm font-medium text-gray-700 mb-2"> ZIP/Postal Code </label>
                  <input
                    type="text"
                    id="zipCode"
                    name="zipCode"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="94103"
                  />
                </div>
              </div>
            </div>

            <!-- Contact Information -->
            <div class="border-b border-gray-200 pb-8">
              <h3 class="text-xl font-semibold text-gray-900 mb-6">Contact Information</h3>

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label for="phone" class="block text-sm font-medium text-gray-700 mb-2"> Phone Number </label>
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="(415) 555-0123"
                  />
                </div>

                <div>
                  <label for="email" class="block text-sm font-medium text-gray-700 mb-2"> Email Address * </label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="contact@your-makerspace.com"
                  />
                </div>

                <div>
                  <label for="contactName" class="block text-sm font-medium text-gray-700 mb-2">
                    Primary Contact Name
                  </label>
                  <input
                    type="text"
                    id="contactName"
                    name="contactName"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="John Smith"
                  />
                </div>

                <div>
                  <label for="contactTitle" class="block text-sm font-medium text-gray-700 mb-2"> Contact Title </label>
                  <input
                    type="text"
                    id="contactTitle"
                    name="contactTitle"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="Community Manager"
                  />
                </div>
              </div>
            </div>

            <!-- Organization Details -->
            <div class="border-b border-gray-200 pb-8">
              <h3 class="text-xl font-semibold text-gray-900 mb-6">Organization Details</h3>

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label for="ownershipModel" class="block text-sm font-medium text-gray-700 mb-2">
                    Ownership Model *
                  </label>
                  <select
                    id="ownershipModel"
                    name="ownershipModel"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    <option value="">Select Model</option>
                    <option value="Commercial">Commercial</option>
                    <option value="Non-profit Community">Non-profit Community</option>
                    <option value="Member-owned Cooperative">Member-owned Cooperative</option>
                    <option value="University/Educational">University/Educational</option>
                    <option value="Government/Public">Government/Public</option>
                    <option value="Other">Other</option>
                  </select>
                </div>

                <div>
                  <label for="established" class="block text-sm font-medium text-gray-700 mb-2">
                    Year Established
                  </label>
                  <input
                    type="number"
                    id="established"
                    name="established"
                    min="1990"
                    max="2025"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="2020"
                  />
                </div>
              </div>

              <div class="mt-6">
                <label for="memberCount" class="block text-sm font-medium text-gray-700 mb-2">
                  Approximate Number of Members
                </label>
                <input
                  type="number"
                  id="memberCount"
                  name="memberCount"
                  min="0"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="150"
                />
              </div>
            </div>

            <!-- Membership & Pricing -->
            <div class="border-b border-gray-200 pb-8">
              <h3 class="text-xl font-semibold text-gray-900 mb-6">Membership & Pricing</h3>

              <div class="grid md:grid-cols-3 gap-6">
                <div>
                  <label for="monthlyCost" class="block text-sm font-medium text-gray-700 mb-2">
                    Monthly Membership ($)
                  </label>
                  <input
                    type="number"
                    id="monthlyCost"
                    name="monthlyCost"
                    min="0"
                    step="0.01"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="75.00"
                  />
                </div>

                <div>
                  <label for="annualCost" class="block text-sm font-medium text-gray-700 mb-2">
                    Annual Membership ($)
                  </label>
                  <input
                    type="number"
                    id="annualCost"
                    name="annualCost"
                    min="0"
                    step="0.01"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="750.00"
                  />
                </div>

                <div>
                  <label for="dayPassCost" class="block text-sm font-medium text-gray-700 mb-2"> Day Pass ($) </label>
                  <input
                    type="number"
                    id="dayPassCost"
                    name="dayPassCost"
                    min="0"
                    step="0.01"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="15.00"
                  />
                </div>
              </div>

              <div class="mt-6">
                <label class="flex items-center">
                  <input
                    type="checkbox"
                    id="freeAccess"
                    name="freeAccess"
                    class="rounded border-gray-300 text-purple-600 focus:ring-purple-500"
                  />
                  <span class="ml-2 text-sm text-gray-700">Free access available</span>
                </label>
              </div>
            </div>

            <!-- Equipment & Specialties -->
            <div class="border-b border-gray-200 pb-8">
              <h3 class="text-xl font-semibold text-gray-900 mb-6">Equipment & Specialties</h3>

              <div class="mb-6">
                <label for="equipment" class="block text-sm font-medium text-gray-700 mb-2">
                  Available Equipment
                </label>
                <textarea
                  id="equipment"
                  name="equipment"
                  rows="4"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="List your equipment (e.g., 3D Printers, CNC Machines, Laser Cutters, Woodworking Tools, Electronics Lab, etc.)"
                ></textarea>
                <p class="text-sm text-gray-500 mt-2">Separate items with commas or new lines</p>
              </div>

              <div class="mb-6">
                <label for="specialties" class="block text-sm font-medium text-gray-700 mb-2">
                  Specialties & Focus Areas
                </label>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                  {
                    [
                      "Electronics",
                      "Woodworking",
                      "Metalworking",
                      "3D Printing",
                      "Textiles",
                      "Ceramics",
                      "CNC",
                      "Laser Cutting",
                      "Programming",
                      "Robotics",
                      "Biotech",
                      "Jewelry Making",
                      "Glass Working",
                      "Leather Working",
                      "Paper Crafts",
                      "Photography",
                      "Video Production",
                      "Music Production",
                      "Cooking",
                      "Gardening",
                      "Sustainability",
                      "Education",
                      "Community Building",
                      "Open Source",
                    ].map(specialty => (
                      <label class="flex items-center">
                        <input
                          type="checkbox"
                          name="specialties"
                          value={specialty}
                          class="rounded border-gray-300 text-purple-600 focus:ring-purple-500"
                        />
                        <span class="ml-2 text-sm text-gray-700">{specialty}</span>
                      </label>
                    ))
                  }
                </div>
              </div>
            </div>

            <!-- Hours of Operation -->
            <div class="border-b border-gray-200 pb-8">
              <h3 class="text-xl font-semibold text-gray-900 mb-6">Hours of Operation</h3>

              <div class="grid md:grid-cols-2 gap-6">
                {
                  [
                    { day: "monday", label: "Monday" },
                    { day: "tuesday", label: "Tuesday" },
                    { day: "wednesday", label: "Wednesday" },
                    { day: "thursday", label: "Thursday" },
                    { day: "friday", label: "Friday" },
                    { day: "saturday", label: "Saturday" },
                    { day: "sunday", label: "Sunday" },
                  ].map(({ day, label }) => (
                    <div>
                      <label for={day} class="block text-sm font-medium text-gray-700 mb-2">
                        {label}
                      </label>
                      <input
                        type="text"
                        id={day}
                        name={day}
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                        placeholder="9:00 AM - 10:00 PM"
                      />
                    </div>
                  ))
                }
              </div>
            </div>

            <!-- Social Media -->
            <div class="border-b border-gray-200 pb-8">
              <h3 class="text-xl font-semibold text-gray-900 mb-6">Social Media & Links</h3>

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label for="facebook" class="block text-sm font-medium text-gray-700 mb-2"> Facebook URL </label>
                  <input
                    type="url"
                    id="facebook"
                    name="facebook"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="https://facebook.com/your-makerspace"
                  />
                </div>

                <div>
                  <label for="twitter" class="block text-sm font-medium text-gray-700 mb-2"> Twitter URL </label>
                  <input
                    type="url"
                    id="twitter"
                    name="twitter"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="https://twitter.com/your-makerspace"
                  />
                </div>

                <div>
                  <label for="instagram" class="block text-sm font-medium text-gray-700 mb-2"> Instagram URL </label>
                  <input
                    type="url"
                    id="instagram"
                    name="instagram"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="https://instagram.com/your-makerspace"
                  />
                </div>

                <div>
                  <label for="youtube" class="block text-sm font-medium text-gray-700 mb-2"> YouTube URL </label>
                  <input
                    type="url"
                    id="youtube"
                    name="youtube"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    placeholder="https://youtube.com/your-makerspace"
                  />
                </div>
              </div>
            </div>

            <!-- Additional Information -->
            <div class="pb-8">
              <h3 class="text-xl font-semibold text-gray-900 mb-6">Additional Information</h3>

              <div class="mb-6">
                <label for="additionalInfo" class="block text-sm font-medium text-gray-700 mb-2">
                  Additional Information
                </label>
                <textarea
                  id="additionalInfo"
                  name="additionalInfo"
                  rows="4"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="Any additional information about your MakerSpace, special programs, events, or anything else you'd like to share..."
                ></textarea>
              </div>

              <div class="mb-6">
                <label class="flex items-center">
                  <input
                    type="checkbox"
                    id="verified"
                    name="verified"
                    class="rounded border-gray-300 text-purple-600 focus:ring-purple-500"
                  />
                  <span class="ml-2 text-sm text-gray-700">
                    I confirm that the information provided is accurate and I have permission to list this MakerSpace
                  </span>
                </label>
              </div>

              <div class="mb-6">
                <label class="flex items-center">
                  <input
                    type="checkbox"
                    id="contactPermission"
                    name="contactPermission"
                    class="rounded border-gray-300 text-purple-600 focus:ring-purple-500"
                  />
                  <span class="ml-2 text-sm text-gray-700">
                    MakerFriends may contact me for verification and updates about this listing
                  </span>
                </label>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center">
              <button
                type="submit"
                class="px-12 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-full font-bold text-lg hover:shadow-xl transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">
                Submit MakerSpace üöÄ
              </button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Success Message -->
    <div id="successMessage" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
      <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
        <div class="text-6xl mb-4">üéâ</div>
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Thank You!</h3>
        <p class="text-gray-600 mb-6">
          Your MakerSpace has been submitted successfully! We'll review it and add it to our directory within 2-3
          business days.
        </p>
        <button
          id="closeSuccess"
          class="px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors">
          Close
        </button>
      </div>
    </div>
  </main>

  <Footer />
</Layout>

<script>
  document.getElementById("makerspaceForm").addEventListener("submit", function (e) {
    e.preventDefault();

    // Get form data
    const formData = new FormData(this);
    const data = Object.fromEntries(formData.entries());

    // Get checkbox values
    const specialties = Array.from(document.querySelectorAll('input[name="specialties"]:checked')).map(cb => cb.value);
    data.specialties = specialties;

    // Get equipment as array
    if (data.equipment) {
      data.equipment = data.equipment
        .split(/[,\n]/)
        .map(item => item.trim())
        .filter(item => item);
    }

    // Convert costs to numbers
    data.monthlyCost = data.monthlyCost ? parseFloat(data.monthlyCost) : 0;
    data.annualCost = data.annualCost ? parseFloat(data.annualCost) : 0;
    data.dayPassCost = data.dayPassCost ? parseFloat(data.dayPassCost) : 0;
    data.memberCount = data.memberCount ? parseInt(data.memberCount) : 0;
    data.established = data.established ? parseInt(data.established) : null;

    // In a real application, this would send data to a server
    // console.log("MakerSpace data:", data);

    // Show success message
    document.getElementById("successMessage").classList.remove("hidden");

    // Reset form
    this.reset();
  });

  // Close success message
  document.getElementById("closeSuccess").addEventListener("click", function () {
    document.getElementById("successMessage").classList.add("hidden");
  });

  // Close success message when clicking outside
  document.getElementById("successMessage").addEventListener("click", function (e) {
    if (e.target === this) {
      this.classList.add("hidden");
    }
  });

  // Free access checkbox handler
  document.getElementById("freeAccess").addEventListener("change", function () {
    const costInputs = ["monthlyCost", "annualCost", "dayPassCost"];
    costInputs.forEach(id => {
      const input = document.getElementById(id);
      input.disabled = this.checked;
      if (this.checked) {
        input.value = "0";
      }
    });
  });

  // Auto-fill city and state from address
  document.getElementById("address").addEventListener("blur", function () {
    const address = this.value.trim();
    if (address && !document.getElementById("city").value) {
      // Simple parsing - in production, use a geocoding service
      const parts = address.split(",").map(part => part.trim());
      if (parts.length >= 2) {
        document.getElementById("city").value = parts[parts.length - 2];
        const stateZip = parts[parts.length - 1].split(" ");
        if (stateZip.length >= 2) {
          document.getElementById("state").value = stateZip[0];
          document.getElementById("zipCode").value = stateZip[1];
        }
      }
    }
  });
</script>
